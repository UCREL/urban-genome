# Graph Schema for Joy/Welch Data

Notes:
- UUIDs are not _globally_ unique, but are only guaranteed unique within a single label
- Most (all?) relations in this data have no properties, and merely link nodes together, but this may change.

Each section is presented in the same formay as a Cipher query, for ease of reference. The format for nodes is: `(identifier:Label {propertyName: propertyValue ... })` where `identifier` is optional, if not required in the rest of the query. This is similar for relations with `-[identifier:Label {propertyName:propertyValue}]->` although do note that the arrow can be either direction for directed relations ( `<-[]-` or `-[]->` ), or can be directionless without an arrowhead ( `-[]-` ). They can alternative be specified by _just_ their direction ( `<--` or `-->` ) with no square parenthesis at all.

Cipher queries are composed of these nodes and relations to build up sequences:

- `MATCH (a:Token)--(b:Token) RETURN a,b` - Return pairs of any-direction relationships between nodes `a,b` of label `Token`.
- `MATCH (:Token)-->(b:Token) RETURN b` - Return a list of the second of any unidirection link to a `Token` with any kind of relationship
- `MATCH (:Token)-[r:Is]-(:Token) RETURN r` - Return a list of the relation between any two `Token` nodes

### `(:Toolchain)`
The toolchain node from which other nodes have been generated, used to link back to a specific toolchain instance for debugging (mostly!)

### `(:Place)`
Index of Place Names (IPN) place data.

- `uuid` - A unique autogenerated UUIDv4 for this node
- `type` - aka. `DESCNM` from the IPN dataset
- `lat` - GPS Latitude
- `lon` - GPS Longitude
- `id` - aka. `PLACEID` from the IPN dataset
- `code` - aka. `PLACE22CD` from the IPN dataset
- `name` - aka. `PLACE22NM` from the IPN dataset, the common name for this place
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:DataSet)`
A collection within the IPN

- `year` - The yead for this IPN set, currently on 2023 is loaded
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:PlaceNameDescriptor)`

- `code` - aka. the `DESCNM` from the IPN dataset
- `id` - aka. `PLACEID` from the IPN dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:Country)`
The country group node
- `name` - aka. `CTRY22NM` from the IPM dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:County {set: 'historic'})`
The Historic County Name
- `name` - aka. `CTYHISTNM` from the IPM dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:County {set: '1961'})`
The 1961 County Name
- `name` - aka. `CTY61NM` from the IPM dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:County {set: '1991'})`
The 1991 County Name
- `name` - aka. `CTY91NM` from the IPM dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:County {set: 'lieutenancy'})`
The Lieutenancy County Name
- `name` - aka. `CTYLTNM` from the IPM dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:LocalAuthorityDistrict {set: '1961'})`
The 1961 Local Authority Name
- `name` - aka. `LAD61NM` from the IPM dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:LocalAuthorityDistrict {set: '1969'})`
The 1991 Local Authority Name
- `name` - aka. `LAD91NM` from the IPM dataset
- `toolchain` - The toolchain UUIDv4 from which this node was generated

### `(:Token)`
- `uuid` - A unique autogenerated UUIDv4 for this node
- `text` - The plaintext for this token
- `paragraph` - The paragraph index that this token is a part of
- `index` - The token index in this paragraph for this token
- `norm` - The normal form of the plaintext for this token
- `source` - The UUIDv4 of the source node that this node is a part

- `(:Token)-[:Next]->(:Token)` - Points to the next `Token` in the sentence/paragraph
- `(:Token)-[:Is]->(:Language)` - Points from the `Language` for this `Token`
- `(:Token)-[:Is]->(:Lemma)` - Points from the `Lemma` for this `Token`
- `(:Token)-[:Is]->(:Tagged)` - Points from the `Tag` for this `Token`
- `(:Token)-[:PartOf]->(:Cluster)` - Points from the `Cluster` this `Token` is part of

### `(:Entity)`
A Named Entity as returned by the Spacy parser
- `uuid` - A unique autogenerated UUIDv4 for this node
- `text` - The plaintext for this entity
- `type` - The type of entity this is (Conforms to Spacy NER values)

These nodes are connected to their `Token` nodes through an `[Is]` relation. Note that there may be several `Token` nodes connected to one `Entity` as many entity types span several lexical tokens.
`(:Token)-[:Is]->(:Entity)`

### `(:Source)`
The source content for a series of other nodes
- `uuid` - A unique autogenerated UUIDv4 for this node
- `title` - The title for this source
- `url` - The original URL for this source

### `(:Lemma)`

- `(:Token)-[:Is]->(:Lemma)` - Points from the `Lemma` for this `Token`

### `(:Tag {resolution: 'fine'})`

- `(:Token)-[:Tagged]->(:Tag)` - Points from the `Tag` for this `Token`

### `(:Tag {resolution: 'coarse'})`

- `(:Token)-[:Tagged]->(:Tag)` - Points from the `Tag` for this `Token`

### `(:Tag {resolution: 'pymusas'})`

- `(:Token)-[:Tagged]->(:Tag)` - Points from the `Tag` for this `Token`

### `(:Cluster)`
- `source` - The UUIDv4 of the source node that this node is a part of

- `(:Token)-[:PartOf]->(:Cluster)` - Points from the `Cluster` this `Token` is part of
